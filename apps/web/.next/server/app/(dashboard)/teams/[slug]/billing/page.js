(()=>{var e={};e.id=772,e.ids=[772],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9188:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),t(6220),t(9699),t(8714),t(9418);var r=t(3653),a=t(4966),i=t(6070),n=t.n(i),l=t(2555),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["(dashboard)",{children:["teams",{children:["[slug]",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6220)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/teams/[slug]/billing/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9699)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9418)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}],d=["/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/teams/[slug]/billing/page.tsx"],m="/(dashboard)/teams/[slug]/billing/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/teams/[slug]/billing/page",pathname:"/teams/[slug]/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9662:(e,s,t)=>{Promise.resolve().then(t.bind(t,5363))},5363:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(2064),a=t(5032),i=t(303),n=t(4002),l=t(9200),o=t(6054),c=t(4090),d=t(3310),m=t(4998),u=t(5403),h=t(980),p=t(112),x=t(456);let g=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",f=[{tier:"team",name:"Team",price:99,pricePerSeat:15,baseSeats:5,description:"For small to medium teams",features:["All Pro skills included","Team-exclusive skills","5 seats included","Additional seats at $15/month","Team usage analytics","Priority support","Centralized billing"],popular:!0},{tier:"enterprise",name:"Enterprise",price:null,pricePerSeat:null,baseSeats:null,description:"For large organizations",features:["Everything in Team","Unlimited seats","Custom skills development","SSO/SAML integration","Dedicated support","SLA guarantee","Security audit reports","Custom contracts"],popular:!1}];function j(){let e=(0,i.useParams)();(0,i.useRouter)();let{user:s}=(0,p.a)(),[t,j]=(0,a.useState)(null),[b,N]=(0,a.useState)(null),[v,y]=(0,a.useState)(!0),[w,P]=(0,a.useState)(null),[k,S]=(0,a.useState)(!1),C=e.slug,Z=async e=>{if(!t)return;S(!0);let s=x.Z.get("access_token");try{let r=await fetch(`${g}/v1/subscriptions/checkout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({tier:e,teamId:t.id})});if(!r.ok){let e=await r.json();throw Error(e.error?.message||"Failed to create checkout session")}let a=await r.json();window.location.href=a.url}catch(e){P(e instanceof Error?e.message:"Failed to start checkout"),S(!1)}},_=async()=>{if(!t)return;let e=x.Z.get("access_token");try{let s=await fetch(`${g}/v1/subscriptions/portal`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({teamId:t.id})});if(!s.ok)throw Error("Failed to create portal session");let r=await s.json();window.location.href=r.url}catch(e){P(e instanceof Error?e.message:"Failed to open billing portal")}};if(v)return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"h-8 bg-muted rounded w-1/4 animate-pulse"}),r.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"})]});if(!t)return(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Team not found"}),r.jsx(n.default,{href:"/teams",children:(0,r.jsxs)(u.z,{children:[r.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"Back to Teams"]})})]});if(!("owner"===b||"admin"===b))return(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Only team admins can manage billing."}),r.jsx(n.default,{href:`/teams/${C}`,children:(0,r.jsxs)(u.z,{children:[r.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"Back to Team"]})})]});let A=t.subscription?.tier||"free";return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(n.default,{href:`/teams/${C}`,children:r.jsx(u.z,{variant:"ghost",size:"icon",children:r.jsx(l.Z,{className:"h-5 w-5"})})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Team Billing"}),r.jsx("p",{className:"text-muted-foreground",children:t.name})]})]}),w&&r.jsx("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-md",children:w}),(0,r.jsxs)(h.Zb,{children:[r.jsx(h.Ol,{children:(0,r.jsxs)(h.ll,{className:"flex items-center gap-2",children:[r.jsx(o.Z,{className:"h-5 w-5"}),"Current Subscription"]})}),r.jsx(h.aY,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-2xl font-bold capitalize",children:[A," Plan"]}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:[t.memberCount," members",t.subscription&&` of ${t.subscription.seats} seats`]}),t.subscription?.currentPeriodEnd&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.subscription.cancelAtPeriodEnd?"Cancels":"Renews"," ",new Date(t.subscription.currentPeriodEnd).toLocaleDateString()]})]}),t.subscription&&(0,r.jsxs)(u.z,{variant:"outline",onClick:_,children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Manage Subscription"]})]})})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Available Plans"}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:f.map(e=>{let s=A===e.tier,t=!s&&"enterprise"!==e.tier;return(0,r.jsxs)(h.Zb,{className:`relative ${e.popular?"border-primary shadow-lg":""}`,children:[e.popular&&r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:r.jsx("span",{className:"bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-medium",children:"Most Popular"})}),(0,r.jsxs)(h.Ol,{children:[r.jsx(h.ll,{children:e.name}),r.jsx(h.SZ,{children:e.description})]}),(0,r.jsxs)(h.aY,{className:"space-y-4",children:[r.jsx("div",{children:null!==e.price?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-3xl font-bold",children:["$",e.price]}),r.jsx("span",{className:"text-muted-foreground",children:"/month"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["+ $",e.pricePerSeat,"/seat/month after ",e.baseSeats," seats"]})]}):r.jsx("span",{className:"text-3xl font-bold",children:"Custom"})}),r.jsx("ul",{className:"space-y-2",children:e.features.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[r.jsx(d.Z,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:e})]},s))}),s?r.jsx(u.z,{className:"w-full",disabled:!0,children:"Current Plan"}):t?r.jsx(u.z,{className:"w-full",onClick:()=>Z(e.tier),disabled:k,children:k?"Processing...":`Upgrade to ${e.name}`}):r.jsx(u.z,{className:"w-full",variant:"outline",onClick:()=>window.location.href="mailto:sales@loaskills.dev",children:"Contact Sales"})]})]},e.tier)})})]}),(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsxs)(h.ll,{className:"flex items-center gap-2",children:[r.jsx(m.Z,{className:"h-5 w-5"}),"Seat Usage"]}),r.jsx(h.SZ,{children:"Manage team seats and member access"})]}),r.jsx(h.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:"Current Usage"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.memberCount," of"," ",t.subscription?.seats||5," seats used"]})]}),r.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${t.memberCount/(t.subscription?.seats||5)*100}%`}})})]}),t.subscription&&r.jsx("p",{className:"text-sm text-muted-foreground",children:"Need more seats? Upgrade your plan or contact us for custom pricing."})]})})]})]})}},8243:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o});var r=t(5032);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:l="",children:o,iconNode:c,...d},m)=>(0,r.createElement)("svg",{ref:m,...n,width:s,height:s,stroke:e,strokeWidth:a?24*Number(t)/Number(s):t,className:i("lucide",l),...d},[...c.map(([e,s])=>(0,r.createElement)(e,s)),...Array.isArray(o)?o:[o]])),o=(e,s)=>{let t=(0,r.forwardRef)(({className:t,...n},o)=>(0,r.createElement)(l,{ref:o,iconNode:s,className:i(`lucide-${a(e)}`,t),...n}));return t.displayName=`${e}`,t}},9200:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(8243).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3310:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(8243).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4090:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(8243).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},303:(e,s,t)=>{"use strict";var r=t(246);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},6220:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(1924).createProxy)(String.raw`/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/teams/[slug]/billing/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[569,307,308,404],()=>t(9188));module.exports=r})();