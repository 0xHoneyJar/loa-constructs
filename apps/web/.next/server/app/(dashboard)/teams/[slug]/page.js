(()=>{var e={};e.id=475,e.ids=[475],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>o}),t(877),t(9699),t(8714),t(9418);var a=t(3653),r=t(4966),i=t(6070),n=t.n(i),l=t(2555),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["(dashboard)",{children:["teams",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,877)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/teams/[slug]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9699)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9418)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}],c=["/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/teams/[slug]/page.tsx"],m="/(dashboard)/teams/[slug]/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/teams/[slug]/page",pathname:"/teams/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8822:(e,s,t)=>{Promise.resolve().then(t.bind(t,5666))},5666:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(2064),r=t(5032),i=t(303),n=t(4002),l=t(8243);let d=(0,l.Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var o=t(1798),c=t(4998),m=t(9200),u=t(6054);let h=(0,l.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,l.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),p=(0,l.Z)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var j=t(5403),f=t(980),g=t(112),v=t(456);let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001";function y(){let e=(0,i.useParams)();(0,i.useRouter)();let{user:s}=(0,g.a)(),[t,l]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[w,k]=(0,r.useState)([]),[P,z]=(0,r.useState)(!0),[C,S]=(0,r.useState)(null),[Z,E]=(0,r.useState)(!1),[_,$]=(0,r.useState)(""),[A,M]=(0,r.useState)("member"),[L,I]=(0,r.useState)(!1),q=e.slug,R=async e=>{if(e.preventDefault(),!_.trim()||!t)return;I(!0);let s=v.Z.get("access_token");try{let e=await fetch(`${b}/v1/teams/${t.id}/invitations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({email:_,role:A})});if(!e.ok){let s=await e.json();throw Error(s.error?.message||"Failed to send invitation")}let a=await e.json();k([...w,a.invitation]),$(""),E(!1)}catch(e){S(e instanceof Error?e.message:"Failed to send invitation")}finally{I(!1)}},T=async e=>{if(!t)return;let s=v.Z.get("access_token");try{if(!(await fetch(`${b}/v1/teams/${t.id}/invitations/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw Error("Failed to revoke invitation");k(w.filter(s=>s.id!==e))}catch(e){S(e instanceof Error?e.message:"Failed to revoke invitation")}},D=async e=>{if(!t||!confirm("Are you sure you want to remove this member?"))return;let s=v.Z.get("access_token");try{if(!(await fetch(`${b}/v1/teams/${t.id}/members/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw Error("Failed to remove member");l({...t,members:t.members.filter(s=>s.userId!==e),memberCount:t.memberCount-1})}catch(e){S(e instanceof Error?e.message:"Failed to remove member")}},F=e=>{let s={owner:{icon:a.jsx(d,{className:"h-3 w-3"}),className:"bg-amber-100 text-amber-800"},admin:{icon:a.jsx(o.Z,{className:"h-3 w-3"}),className:"bg-blue-100 text-blue-800"},member:{icon:a.jsx(c.Z,{className:"h-3 w-3"}),className:"bg-gray-100 text-gray-800"}};return s[e]||s.member},B="owner"===y||"admin"===y;return P?(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"h-8 bg-muted rounded w-1/4 animate-pulse"}),a.jsx("div",{className:"h-32 bg-muted rounded animate-pulse"})]}):t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(n.default,{href:"/teams",children:a.jsx(j.z,{variant:"ghost",size:"icon",children:a.jsx(m.Z,{className:"h-5 w-5"})})}),a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx("span",{className:"text-xl font-semibold text-primary",children:t.name[0].toUpperCase()})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:t.name}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["/",t.slug]})]})]})}),B&&(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(n.default,{href:`/teams/${q}/billing`,children:(0,a.jsxs)(j.z,{variant:"outline",children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Billing"]})}),a.jsx(n.default,{href:`/teams/${q}/settings`,children:(0,a.jsxs)(j.z,{variant:"outline",children:[a.jsx(h,{className:"h-4 w-4 mr-2"}),"Settings"]})})]})]}),C&&a.jsx("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-md",children:C}),(0,a.jsxs)(f.Zb,{children:[a.jsx(f.Ol,{children:(0,a.jsxs)(f.ll,{className:"flex items-center gap-2",children:[a.jsx(u.Z,{className:"h-5 w-5"}),"Subscription"]})}),a.jsx(f.aY,{children:t.subscription?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium capitalize",children:[t.subscription.tier," Plan"]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.memberCount," of ",t.subscription.seats," seats used"]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"active"===t.subscription.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.subscription.status})]}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"Free Plan"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.memberCount," of 5 seats used"]})]}),a.jsx(n.default,{href:`/teams/${q}/billing`,children:a.jsx(j.z,{size:"sm",children:"Upgrade"})})]})})]}),(0,a.jsxs)(f.Zb,{children:[(0,a.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(f.ll,{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-5 w-5"}),"Members (",t.memberCount,")"]}),a.jsx(f.SZ,{children:"People who have access to this team"})]}),B&&(0,a.jsxs)(j.z,{onClick:()=>E(!0),children:[a.jsx(x,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]}),(0,a.jsxs)(f.aY,{children:[Z&&(0,a.jsxs)("form",{onSubmit:R,className:"mb-6 p-4 border rounded-md bg-muted/50",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Invite a new member"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx("input",{type:"email",value:_,onChange:e=>$(e.target.value),placeholder:"Email address",className:"flex-1 px-3 py-2 border rounded-md",autoFocus:!0}),(0,a.jsxs)("select",{value:A,onChange:e=>M(e.target.value),className:"px-3 py-2 border rounded-md",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsx(j.z,{type:"submit",disabled:L||!_.trim(),children:L?"Sending...":"Send Invite"}),a.jsx(j.z,{type:"button",variant:"outline",onClick:()=>{E(!1),$("")},children:"Cancel"})]})]}),B&&w.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Pending Invitations"}),a.jsx("div",{className:"space-y-2",children:w.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-yellow-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.email}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground capitalize",children:["Invited as ",e.role]})]})]}),a.jsx(j.z,{variant:"ghost",size:"sm",onClick:()=>T(e.id),children:"Revoke"})]},e.id))})]}),a.jsx("div",{className:"space-y-2",children:t.members.map(e=>{let t=F(e.role),r=e.userId===s?.id;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx("span",{className:"font-medium text-primary",children:e.user.name?.[0]?.toUpperCase()||e.user.email[0].toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.user.name||e.user.email,r&&a.jsx("span",{className:"text-muted-foreground ml-1",children:"(you)"})]}),(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${t.className}`,children:[t.icon,e.role]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.user.email})]})]}),B&&!r&&"owner"!==e.role&&a.jsx(j.z,{variant:"ghost",size:"icon",onClick:()=>D(e.userId),children:a.jsx(p,{className:"h-4 w-4 text-destructive"})})]},e.id)})})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Team not found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The team you're looking for doesn't exist or you don't have access."}),a.jsx(n.default,{href:"/teams",children:(0,a.jsxs)(j.z,{children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Back to Teams"]})})]})}},8243:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var a=t(5032);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:l="",children:d,iconNode:o,...c},m)=>(0,a.createElement)("svg",{ref:m,...n,width:s,height:s,stroke:e,strokeWidth:r?24*Number(t)/Number(s):t,className:i("lucide",l),...c},[...o.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(d)?d:[d]])),d=(e,s)=>{let t=(0,a.forwardRef)(({className:t,...n},d)=>(0,a.createElement)(l,{ref:d,iconNode:s,className:i(`lucide-${r(e)}`,t),...n}));return t.displayName=`${e}`,t}},9200:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(8243).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1798:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(8243).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},303:(e,s,t)=>{"use strict";var a=t(246);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},877:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(1924).createProxy)(String.raw`/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(dashboard)/teams/[slug]/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[569,307,308,404],()=>t(9881));module.exports=a})();