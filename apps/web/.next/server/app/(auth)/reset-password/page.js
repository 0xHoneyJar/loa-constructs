(()=>{var e={};e.id=277,e.ids=[277],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4312:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(8314),t(9483),t(8714),t(9418);var r=t(3653),a=t(4966),n=t(6070),o=t.n(n),i=t(2555),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let d=["",{children:["(auth)",{children:["reset-password",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8314)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(auth)/reset-password/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9483)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(auth)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9418)),"/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8714,23)),"next/dist/client/components/not-found-error"]}],c=["/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(auth)/reset-password/page.tsx"],u="/(auth)/reset-password/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(auth)/reset-password/page",pathname:"/reset-password",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8278:(e,s,t)=>{Promise.resolve().then(t.bind(t,7522))},7700:(e,s,t)=>{Promise.resolve().then(t.bind(t,112))},7391:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,417,23)),Promise.resolve().then(t.t.bind(t,181,23)),Promise.resolve().then(t.t.bind(t,7814,23)),Promise.resolve().then(t.t.bind(t,5266,23)),Promise.resolve().then(t.t.bind(t,490,23)),Promise.resolve().then(t.t.bind(t,2648,23))},2740:()=>{},7522:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(2064),a=t(5032),n=t(4002),o=t(303),i=t(2372),l=t(5395),d=t(1293),c=t(5403),u=t(1662),m=t(4055),h=t(980);let p=d.Ry({password:d.Z_().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:d.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function f(){(0,o.useRouter)();let e=(0,o.useSearchParams)().get("token"),[s,t]=(0,a.useState)(!1),[d,f]=(0,a.useState)(!1),[x,w]=(0,a.useState)(null),{register:g,handleSubmit:b,formState:{errors:y}}=(0,i.cI)({resolver:(0,l.F)(p),defaultValues:{password:"",confirmPassword:""}}),v=async s=>{if(!e){w("Invalid or missing reset token");return}t(!0),w(null);try{let t=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",r=await fetch(`${t}/v1/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,password:s.password})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to reset password")}f(!0)}catch(e){w(e instanceof Error?e.message:"An error occurred. Please try again.")}finally{t(!1)}};return e?d?(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{className:"space-y-1",children:[r.jsx(h.ll,{className:"text-2xl text-center",children:"Password reset successful"}),r.jsx(h.SZ,{className:"text-center",children:"Your password has been successfully updated"})]}),r.jsx(h.aY,{className:"space-y-4",children:r.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"You can now sign in with your new password."})}),r.jsx(h.eW,{className:"flex justify-center",children:r.jsx(n.default,{href:"/login",children:r.jsx(c.z,{children:"Sign in"})})})]}):(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{className:"space-y-1",children:[r.jsx(h.ll,{className:"text-2xl text-center",children:"Reset password"}),r.jsx(h.SZ,{className:"text-center",children:"Enter your new password below"})]}),r.jsx(h.aY,{className:"space-y-4",children:(0,r.jsxs)("form",{onSubmit:b(v),className:"space-y-4",children:[x&&r.jsx("div",{className:"p-3 text-sm text-destructive bg-destructive/10 rounded-md",children:x}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(m._,{htmlFor:"password",children:"New Password"}),r.jsx(u.I,{id:"password",type:"password",autoComplete:"new-password",disabled:s,...g("password")}),y.password&&r.jsx("p",{className:"text-sm text-destructive",children:y.password.message}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters with uppercase, lowercase, and number"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(m._,{htmlFor:"confirmPassword",children:"Confirm New Password"}),r.jsx(u.I,{id:"confirmPassword",type:"password",autoComplete:"new-password",disabled:s,...g("confirmPassword")}),y.confirmPassword&&r.jsx("p",{className:"text-sm text-destructive",children:y.confirmPassword.message})]}),r.jsx(c.z,{type:"submit",className:"w-full",disabled:s,children:s?"Resetting...":"Reset password"})]})}),r.jsx(h.eW,{className:"flex justify-center",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Remember your password?"," ",r.jsx(n.default,{href:"/login",className:"text-primary underline-offset-4 hover:underline",children:"Sign in"})]})})]}):(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{className:"space-y-1",children:[r.jsx(h.ll,{className:"text-2xl text-center",children:"Invalid link"}),r.jsx(h.SZ,{className:"text-center",children:"This password reset link is invalid or has expired"})]}),r.jsx(h.aY,{className:"space-y-4",children:r.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please request a new password reset link."})}),r.jsx(h.eW,{className:"flex justify-center",children:r.jsx(n.default,{href:"/forgot-password",children:r.jsx(c.z,{children:"Request new link"})})})]})}function x(){return r.jsx(a.Suspense,{fallback:r.jsx(h.Zb,{children:r.jsx(h.aY,{className:"p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Loading..."})})}),children:r.jsx(f,{})})}},5403:(e,s,t)=>{"use strict";t.d(s,{z:()=>d});var r=t(2064),a=t(5032),n=t(8265),o=t(5217),i=t(4342);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...o},d)=>{let c=a?n.g7:"button";return r.jsx(c,{className:(0,i.cn)(l({variant:s,size:t,className:e})),ref:d,...o})});d.displayName="Button"},980:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>i,SZ:()=>d,Zb:()=>o,aY:()=>c,eW:()=>u,ll:()=>l});var r=t(2064),a=t(5032),n=t(4342);let o=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));o.displayName="Card";let i=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...s},t)=>r.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s}));u.displayName="CardFooter"},1662:(e,s,t)=>{"use strict";t.d(s,{I:()=>o});var r=t(2064),a=t(5032),n=t(4342);let o=a.forwardRef(({className:e,type:s,...t},a)=>r.jsx("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));o.displayName="Input"},4055:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var r=t(2064),a=t(5032),n=t(1937),o=t(5217),i=t(4342);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...s},t)=>r.jsx(n.f,{ref:t,className:(0,i.cn)(l(),e),...s}));d.displayName=n.f.displayName},112:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>c,a:()=>u});var r=t(2064),a=t(5032),n=t(456);let o=(0,a.createContext)(void 0),i=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",l="access_token",d="refresh_token";function c({children:e}){let[s,t]=(0,a.useState)({user:null,isLoading:!0,isAuthenticated:!1}),c=(0,a.useCallback)((e,s,t=!1)=>{let r={secure:!0,sameSite:"lax"};t&&(r.expires=30),n.Z.set(l,e,r),n.Z.set(d,s,r)},[]),u=(0,a.useCallback)(()=>{n.Z.remove(l),n.Z.remove(d)},[]),m=(0,a.useCallback)(()=>n.Z.get(l),[]),h=(0,a.useCallback)(()=>n.Z.get(d),[]);(0,a.useCallback)(async()=>{let e=m();if(!e)return null;try{let s=await fetch(`${i}/v1/auth/me`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)return null;throw Error("Failed to fetch user")}return(await s.json()).user}catch{return null}},[m]);let p=(0,a.useCallback)(async()=>{let e=h();if(!e)throw Error("No refresh token available");let s=await fetch(`${i}/v1/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!s.ok)throw u(),t({user:null,isLoading:!1,isAuthenticated:!1}),Error("Failed to refresh token");let r=await s.json();c(r.accessToken,r.refreshToken)},[h,c,u]),f=(0,a.useCallback)(async(e,s,r=!1)=>{let a=await fetch(`${i}/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})});if(!a.ok)throw Error((await a.json()).error||"Login failed");let n=await a.json();c(n.accessToken,n.refreshToken,r),t({user:n.user,isLoading:!1,isAuthenticated:!0})},[c]),x=(0,a.useCallback)(async(e,s,r)=>{let a=await fetch(`${i}/v1/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s,name:r})});if(!a.ok)throw Error((await a.json()).error||"Registration failed");let n=await a.json();c(n.accessToken,n.refreshToken),t({user:n.user,isLoading:!1,isAuthenticated:!0})},[c]),w=(0,a.useCallback)(async()=>{let e=m();try{e&&await fetch(`${i}/v1/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch{}u(),t({user:null,isLoading:!1,isAuthenticated:!1})},[m,u]);return r.jsx(o.Provider,{value:{...s,login:f,register:x,logout:w,refreshToken:p,getAccessToken:m},children:e})}function u(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4342:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(3921),a=t(1417);function n(...e){return(0,a.m6)((0,r.W)(e))}},303:(e,s,t)=>{"use strict";var r=t(246);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},9483:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(9222);function a({children:e}){return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Loa Skills Registry"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Agent-driven development framework"})]}),r.jsx("div",{className:"w-full max-w-md",children:e}),r.jsx("footer",{className:"mt-8 text-center text-sm text-muted-foreground",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," The Honey Jar. All rights reserved."]})})]})}},8314:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(1924).createProxy)(String.raw`/home/merlin/Documents/thj/code/loa-registry/apps/web/src/app/(auth)/reset-password/page.tsx#default`)},9418:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>l});var r=t(9222),a=t(414),n=t.n(a),o=t(1924);let i=(0,o.createProxy)(String.raw`/home/merlin/Documents/thj/code/loa-registry/apps/web/src/contexts/auth-context.tsx#AuthProvider`);(0,o.createProxy)(String.raw`/home/merlin/Documents/thj/code/loa-registry/apps/web/src/contexts/auth-context.tsx#useAuth`),t(5988);let l={title:{default:"Loa Skills Registry",template:"%s | Loa Skills Registry"},description:"Discover, install, and manage AI agent skills for the Loa framework",keywords:["AI skills","Claude","Loa framework","agent skills","marketplace"]};function d({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:r.jsx("body",{className:`${n().variable} font-sans antialiased`,children:r.jsx(i,{children:e})})})}},5988:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[569,307,308,444],()=>t(4312));module.exports=r})();